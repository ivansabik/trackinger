<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>trackinger - client tests</title>
  <link rel="stylesheet" href="../modules/qunit/qunit-1.18.0.css">
  <script src="../modules/qunit/qunit-1.18.0.js"></script>
  <script src="../modules/geo_position_js_simulator/geo.js"></script>
  <script src="../modules/geo_position_js_simulator/geo_position_js_simulator.js"></script>
  <script src="../lib/models.js"></script>
  <script>
    QUnit.test('initial status is route started', function( assert ) {
      route = new Route();
      assert.equal(route.status, 'started');
    });
    
    QUnit.test('ID is generated for new route', function( assert ) {
      route = new Route();
      assert.equal(route.id, true);
    });
    
    QUnit.test('started at is assigned', function( assert ) {
      route = new Route();
      assert.equal(route.startedAt, true);
    });
    
    QUnit.test('adds Geopoint', function( assert ) {
      route = new Route();
      gp = new Geopoint();
      route.addPoint(gp);
      assert.equal(route.geopoints[0], true);
    });
    
    QUnit.test('doesn\'nt add Geopoint if is the same as last', function( assert ) {
      route = new Route();
      gp = new Geopoint();
      route.addPoint(gp);
      assert.equal(route.geopoints[0], true);
    });
    
    QUnit.test('doesn\'nt add Geopoint if has same latlon combination as last', function( assert ) {
      route = new Route();
      gp = new Geopoint();
      route.addPoint(gp);
      assert.equal(route.geopoints[0], true);
    });
    
    QUnit.test('changes route satus after same location for longtime (automatic timeout)', function( assert ) {
      route = new Route();
      gp = new Geopoint();
      route.addPoint(gp);
      assert.equal(route.geopoints[0], true);
    });
    
    
    QUnit.test('calculates route distance', function( assert ) {
      route = new Route();
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      assert.equal(route.getDistance(), 0.00);
    });
    
    QUnit.test('calculates route time', function( assert ) {
      route = new Route();
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      assert.equal(route.getTime(), 0.00);
    });
    
    QUnit.test('generates maps polyline', function( assert ) {
      route = new Route();
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      assert.equal(route.getMapPolyline(), []);
    });
    
    QUnit.test('generates maps markers', function( assert ) {
      route = new Route();
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      route.addPoint(new Geopoint(0.00, 0.00));
      assert.equal(route.getMapMarkers(), []);
    });
  </script>
</head>
<body>
 
<div id="qunit"></div>
 
</body>
</html>
